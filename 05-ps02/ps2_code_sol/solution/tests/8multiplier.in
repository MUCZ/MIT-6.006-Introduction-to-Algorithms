# Circuit: tables
table eq 0 1
table and2 0 0 0 1
table xor2 0 1 1 0

# Circuit: types
type in eq 0
type and1 and2 1
type and2 and2 13
type xor2 xor2 29

# Circuit: gates
gate a0 in
gate a1 in
gate b0 in
gate b1 in
gate a0b1 and1 a0 b1
gate c0 and2 a0 b0
gate a1b0 and2 a1 b0
gate a1b1 and2 a1 b1
gate c1 xor2 a0b1 a1b0
gate a0b1a1b0 and1 a0b1 a1b0
gate c2 xor2 a0b1a1b0 a1b1
gate c3 and2 a0b1a1b0 a1b1

# Circuit: probes
probe c0
probe c1
probe c2
probe c3

# Simulation: inputs
flip a1 1 3
flip b1 1 13
flip a1 0 23 
flip b1 0 33
flip a0 1 37
flip a1 1 41
flip b0 1 43
flip b1 1 47
done

# Layout for visualization.
layout
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="364pt" height="221pt" viewBox="0.00 0.00 364.00 221.00"><symbol preserveAspectRatio="none" id="svgsym-gate-type-and" height="100%" width="100%" viewBox="0 0 75.807 62.927">
 <g transform="translate(1.3277939e-4,-989.44832)">
  <path stroke-linejoin="round" d="m1.2986,990.77c16.673,0.12822,33.379-0.407,50.026,0.67997,7.1812,1.1682,10.187,3.1235,14.456,7.1119,6.8877,6.6955,9.3789,17.106,8.5697,26.306-0.47506,7.1398-3.9127,14.998-10.062,19.718-3.6092,2.738-7.7422,4.4443-13.111,5.3838-10.042,1.3275-20.203,0.7515-30.304,0.9364-6.5251,0.01-13.051,0.01-19.575,0.1539v-60.29z" stroke-dashoffset="0" stroke="#000" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="2.59711337" fill="#FFF"/>
 </g>
</symbol><symbol preserveAspectRatio="none" id="svgsym-gate-type-xor" height="100%" width="100%" viewBox="0 0 81.585 67.617">
 <g transform="translate(-4.7683716e-8,-984.74556)" stroke="#000" stroke-miterlimit="4" stroke-width="2.5999999">
  <path stroke-width="0" fill="#FFF" d="m9.8205,986.05c7.258,12.571,9.044,22.083,9.044,32.486,0,12.555-3.1508,22.307-9.044,32.514l-8.52,0.1c5.8932-10.207,9.044-19.959,9.044-32.514,0-10.403-1.786-19.915-9.044-32.486z" fill="none"/>
  <path stroke-linejoin="miter" d="m9.8205,986.05c7.258,12.571,9.044,22.083,9.044,32.486,0,12.555-3.1508,22.307-9.044,32.514,22.786,0,57.7-10.868,70.465-31.835-12.892-19.49-48.044-33.15-70.464-33.15z" stroke-linecap="butt" fill="#FFF"/>
  <path stroke-linejoin="round" stroke-linecap="round" d="m1.3,986.06c7.258,12.571,9.044,22.083,9.044,32.486,0,12.555-3.1508,22.307-9.044,32.514" fill="none"/>
 </g>
</symbol><symbol preserveAspectRatio="none" id="svgsym-gate-type-eq" height="100%" width="100%" viewBox="0 0 52.809 60.576">
 <g transform="translate(-4.7683716e-8,-991.78611)">
  <path stroke-linejoin="round" d="M51.509,1022.1,1.3,1051.1v-57.976l50.209,28.988z" stroke-dashoffset="0" stroke="#000" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="2.5999999" fill="#FFF"/>
 </g>
</symbol>
<g id="graph1" class="graph" transform="scale(1 1) rotate(0) translate(4 217)">
<title>G</title>
<polygon fill="white" stroke="white" points="-4,5 -4,-217 361,-217 361,5 -4,5"/>
<g id="wire__a1b1__c2" class="edge"><title>gate__a1b1-gate__c2</title>
<path fill="none" stroke="black" d="M223,-33C223,-33 329,-87 329,-87"/>
</g>
<g id="wire__a1b1__c3" class="edge"><title>gate__a1b1-gate__c3</title>
<path fill="none" stroke="black" d="M223,-33C223,-33 329,-33 329,-33"/>
</g>
<g id="wire__b0__c0" class="edge"><title>gate__b0-gate__c0</title>
<path fill="none" stroke="black" d="M27,-137C27,-137 117,-195 117,-195"/>
</g>
<g id="wire__b0__a1b0" class="edge"><title>gate__b0-gate__a1b0</title>
<path fill="none" stroke="black" d="M27,-137C27,-137 117,-87 117,-87"/>
</g>
<g id="wire__b1__a1b1" class="edge"><title>gate__b1-gate__a1b1</title>
<path fill="none" stroke="black" d="M27,-79C27,-79 61.6391,-67.1391 90,-60 148.492,-45.2762 223,-33 223,-33"/>
</g>
<g id="wire__b1__a0b1" class="edge"><title>gate__b1-gate__a0b1</title>
<path fill="none" stroke="black" d="M27,-79C27,-79 117,-141 117,-141"/>
</g>
<g id="wire__a0__c0" class="edge"><title>gate__a0-gate__c0</title>
<path fill="none" stroke="black" d="M27,-193C27,-193 117,-195 117,-195"/>
</g>
<g id="wire__a0__a0b1" class="edge"><title>gate__a0-gate__a0b1</title>
<path fill="none" stroke="black" d="M27,-193C27,-193 117,-141 117,-141"/>
</g>
<g id="wire__a1__a1b1" class="edge"><title>gate__a1-gate__a1b1</title>
<path fill="none" stroke="black" d="M27,-18C27,-18 223,-33 223,-33"/>
</g>
<g id="wire__a1__a1b0" class="edge"><title>gate__a1-gate__a1b0</title>
<path fill="none" stroke="black" d="M27,-18C27,-18 117,-87 117,-87"/>
</g>
<g id="wire__a0b1a1b0__c2" class="edge"><title>gate__a0b1a1b0-gate__c2</title>
<path fill="none" stroke="black" d="M223,-87C223,-87 329,-87 329,-87"/>
</g>
<g id="wire__a0b1a1b0__c3" class="edge"><title>gate__a0b1a1b0-gate__c3</title>
<path fill="none" stroke="black" d="M223,-87C223,-87 329,-33 329,-33"/>
</g>
<g id="wire__a1b0__c1" class="edge"><title>gate__a1b0-gate__c1</title>
<path fill="none" stroke="black" d="M117,-87C117,-87 223,-141 223,-141"/>
</g>
<g id="wire__a1b0__a0b1a1b0" class="edge"><title>gate__a1b0-gate__a0b1a1b0</title>
<path fill="none" stroke="black" d="M117,-87C117,-87 223,-87 223,-87"/>
</g>
<g id="wire__a0b1__c1" class="edge"><title>gate__a0b1-gate__c1</title>
<path fill="none" stroke="black" d="M117,-141C117,-141 223,-141 223,-141"/>
</g>
<g id="wire__a0b1__a0b1a1b0" class="edge"><title>gate__a0b1-gate__a0b1a1b0</title>
<path fill="none" stroke="black" d="M117,-141C117,-141 223,-87 223,-87"/>
</g>
<g id="gate__a1b1" class="node"><title>gate__a1b1</title>
<use xlink:href="#svgsym-gate-type-and" x="196.0" width="54.0" y="-51.0" height="36.0"/>
<text text-anchor="middle" x="223" y="-29.4" font-family="Times Roman,serif" font-size="14.00">a1b1</text>
</g><g id="gate__c0" class="node"><title>gate__c0</title>
<use xlink:href="#svgsym-gate-type-and" x="90.0" width="54.0" y="-213.0" height="36.0"/>
<text text-anchor="middle" x="117" y="-191.4" font-family="Times Roman,serif" font-size="14.00">c0</text>
</g><g id="gate__c1" class="node"><title>gate__c1</title>
<use xlink:href="#svgsym-gate-type-xor" x="196.0" width="54.0" y="-159.0" height="36.0"/>
<text text-anchor="middle" x="223" y="-137.4" font-family="Times Roman,serif" font-size="14.00">c1</text>
</g><g id="gate__b0" class="node"><title>gate__b0</title>
<use xlink:href="#svgsym-gate-type-eq" x="0.0" width="54.0" y="-155.0" height="36.0"/>
<text text-anchor="middle" x="27" y="-133.4" font-family="Times Roman,serif" font-size="14.00">b0</text>
</g><g id="gate__c2" class="node"><title>gate__c2</title>
<use xlink:href="#svgsym-gate-type-xor" x="302.0" width="54.0" y="-105.0" height="36.0"/>
<text text-anchor="middle" x="329" y="-83.4" font-family="Times Roman,serif" font-size="14.00">c2</text>
</g><g id="gate__b1" class="node"><title>gate__b1</title>
<use xlink:href="#svgsym-gate-type-eq" x="0.0" width="54.0" y="-97.0" height="36.0"/>
<text text-anchor="middle" x="27" y="-75.4" font-family="Times Roman,serif" font-size="14.00">b1</text>
</g><g id="gate__a0" class="node"><title>gate__a0</title>
<use xlink:href="#svgsym-gate-type-eq" x="0.0" width="54.0" y="-211.0" height="36.0"/>
<text text-anchor="middle" x="27" y="-189.4" font-family="Times Roman,serif" font-size="14.00">a0</text>
</g><g id="gate__c3" class="node"><title>gate__c3</title>
<use xlink:href="#svgsym-gate-type-and" x="302.0" width="54.0" y="-51.0" height="36.0"/>
<text text-anchor="middle" x="329" y="-29.4" font-family="Times Roman,serif" font-size="14.00">c3</text>
</g><g id="gate__a1" class="node"><title>gate__a1</title>
<use xlink:href="#svgsym-gate-type-eq" x="0.0" width="54.0" y="-36.0" height="36.0"/>
<text text-anchor="middle" x="27" y="-14.4" font-family="Times Roman,serif" font-size="14.00">a1</text>
</g><g id="gate__a0b1a1b0" class="node"><title>gate__a0b1a1b0</title>
<use xlink:href="#svgsym-gate-type-and" x="180.0" width="86.0" y="-105.0" height="36.0"/>
<text text-anchor="middle" x="223" y="-83.4" font-family="Times Roman,serif" font-size="14.00">a0b1a1b0</text>
</g><g id="gate__a1b0" class="node"><title>gate__a1b0</title>
<use xlink:href="#svgsym-gate-type-and" x="90.0" width="54.0" y="-105.0" height="36.0"/>
<text text-anchor="middle" x="117" y="-83.4" font-family="Times Roman,serif" font-size="14.00">a1b0</text>
</g><g id="gate__a0b1" class="node"><title>gate__a0b1</title>
<use xlink:href="#svgsym-gate-type-and" x="90.0" width="54.0" y="-159.0" height="36.0"/>
<text text-anchor="middle" x="117" y="-137.4" font-family="Times Roman,serif" font-size="14.00">a0b1</text>
</g></g>
</svg>
